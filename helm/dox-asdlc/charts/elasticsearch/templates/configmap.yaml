{{- if .Values.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "elasticsearch.fullname" . }}-config
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "elasticsearch.labels" . | nindent 4 }}
data:
  # Elasticsearch configuration is primarily via environment variables,
  # but this ConfigMap stores settings for reference and external tools.
  CLUSTER_NAME: {{ .Values.config.clusterName | quote }}
  DISCOVERY_TYPE: {{ .Values.config.discoveryType | quote }}
  HTTP_PORT: {{ .Values.config.httpPort | quote }}
  SECURITY_ENABLED: {{ .Values.config.securityEnabled | quote }}
  # Index settings for aSDLC KnowledgeStore
  INDEX_PREFIX: {{ .Values.indexSettings.prefix | quote }}
  NUMBER_OF_SHARDS: {{ .Values.indexSettings.numberOfShards | quote }}
  NUMBER_OF_REPLICAS: {{ .Values.indexSettings.numberOfReplicas | quote }}
  KNN_NUM_CANDIDATES: {{ .Values.indexSettings.knn.numCandidates | quote }}
{{- end }}
