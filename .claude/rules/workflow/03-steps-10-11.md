# Steps 10-11: DevOps, Closure, and Cross-Cutting Concerns

## Step 10: DevOps

**Purpose:** Deploy or configure infrastructure if needed.

| Aspect | Details |
|--------|---------|
| Executor | PM CLI coordinates, DevOps agent executes |
| Inputs | Committed code, deployment requirements |
| Outputs | Deployed infrastructure, CI/CD configuration |
| HITL Gates | **DevOps Invocation** (mandatory) |

**HITL Gate:** Before any devops operation:
```
DevOps operation needed: [description]

Options:
 A) Run devops agent here (I'll wait)
 B) Send notification to separate DevOps CLI
 C) Show me instructions (I'll run manually)
```

This gate is mandatory and cannot be skipped.

## Step 11: Closure

**Purpose:** Summarize work and close tracking items.

| Aspect | Details |
|--------|---------|
| Executor | PM CLI |
| Inputs | Completed feature, open issues |
| Outputs | Summary report, closed issues |
| HITL Gates | None |

PM CLI:
- Summarizes what was implemented
- Closes related GitHub issues with commit references
- Updates progress tracking
- Notes any deferred work

## HITL Gates Summary

Gates are defined in `.claude/rules/hitl-gates.md`. Here is which gates apply to which steps:

| Step | Gate | Type |
|------|------|------|
| 4 | Design Review Concerns | Advisory |
| 5 | Complex Operation | Advisory |
| 6 | Permission Forwarding | Per-request |
| 7 | Test Failures > 3 | Advisory |
| 9 | Protected Path Commit | Mandatory |
| 10 | DevOps Invocation | Mandatory |

**Mandatory gates** block progress until user responds.
**Advisory gates** allow proceeding with acknowledgment.

## Skills Integration

Skills provide reusable procedures for specific tasks. Here is which skills are used at which steps:

| Step | Skill | Purpose |
|------|-------|---------|
| 2 | feature-planning | Create work item artifacts |
| 3 | diagram-builder | Generate Mermaid diagrams |
| 4, 8 | code-review | Code analysis and review |
| 6 | tdd-execution | Red-Green-Refactor cycle |
| 7 | testing | Quality gates (test, lint, SAST, SCA, E2E) |
| 9 | feature-completion | Validate and complete feature |
| 10 | deploy | Environment deployment |

Skills are located in `.claude/skills/<name>/` with SKILL.md + optional `scripts/` directory.

## Non-Negotiable Rules

See `CLAUDE.md` for the authoritative list. Key constraints enforced by this workflow:

1. **Plan before code** -- Steps 1-2 must complete before Step 6
2. **TDD required** -- Step 6 uses `@tdd-execution` skill
3. **Commit only complete features** -- Step 9 uses `@feature-completion` skill
4. **Review findings become issues** -- Step 8 creates GitHub issues

## Commit Protocol

See `@feature-completion` skill (Step 9) for commit format and authority rules.
See `.claude/rules/trunk-based-development.md` for commit authority and revert rules.
